(this.webpackJsonpsquanchyparty=this.webpackJsonpsquanchyparty||[]).push([[0],{186:function(e,t,a){e.exports=a(289)},289:function(e,t,a){"use strict";a.r(t);a(187),a(214),a(216),a(217),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235),a(236),a(237),a(239),a(240),a(241),a(242),a(243),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(254),a(255),a(256);var n=a(0),r=a.n(n),c=a(26),s=a.n(c),o=a(35),i=a(36),l=a(38),u=a(37),p=a(39),h=a(76),m=a.n(h),d=a(124),f=a.n(d),y=a(125),b=a.n(y),g=a(75),E=a.n(g),k=(a(264),a(16)),j=a(115),v=a.n(j),O=(a(99),a(116)),_=a.n(O),x=a(117),S=a.n(x),w=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.state.tusa_data;return r.a.createElement(k.i,{id:this.props.id},r.a.createElement(k.j,null,"\ud83e\udd5aParty Playlist \ud83e\udd5a"),r.a.createElement(k.e,{title:t&&t.name},t&&r.a.createElement(k.c,null,"\u0412\u044b\u0431\u0440\u0430\u043d\u044b: ",t.users.map((function(e){return e.first_name+(null!==e.last_name?" "+e.last_name:"")})).join(", "))),r.a.createElement(k.h,null,this.props.state.tracks&&this.props.state.tracks.map((function(t,a){return r.a.createElement(k.a,{key:a,id:a,before:t.play_now?r.a.createElement(S.a,{fill:"#fff"}):r.a.createElement(_.a,{fill:"#fff"}),onClick:e.props.play},t.track_name+(t.artist.length>0?" - "+t.artist.map((function(e){return e.name})).join(", "):""))}))),r.a.createElement("div",{className:"play_btn"},r.a.createElement("a",{href:"#do_sexy",onClick:this.props.choose,style:{textDecoration:"none"}},r.a.createElement("span",{role:"img","aria-label":"yea","aria-labelledby":"yea",style:{fontSize:"50px",marginLeft:"25px"}},"\ud83d\udd04"))),r.a.createElement(v.a,{src:this.props.state.now_stream,id:"audio",onEnded:this.props.nextSong}))}}]),t}(r.a.Component),C=a(118),P=a(45),D=a(44),B=a(120),T=a(126),z=a(74),q=a.n(z),M=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.i,a=e.x,n=e.y,c=e.rot,s=e.scale,o=e.trans,i=e.bind,l=e.data[t],u=l.name,p=l.lang,h=l.username,m=(l.text,l.pics);return r.a.createElement(D.a.div,{key:t,style:{transform:Object(D.b)([a,n],(function(e,t){return"translate3d(".concat(e,"px,").concat(t,"px,0)")}))}},r.a.createElement(D.a.div,Object.assign({},i(t),{style:{transform:Object(D.b)([c,s],o)}}),r.a.createElement("div",{className:"card"},r.a.createElement(T.a,null,m.map((function(e,t){return r.a.createElement("img",{src:e,key:t,alt:"profilePicture"})}))),r.a.createElement("h2",null,u),p&&r.a.createElement("h5",null,"Language: ",p),r.a.createElement(q.a,{size:"xl",component:"a",href:"https://teleg.run/"+h},"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u044b\u0439 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442"),r.a.createElement(q.a,{style:{marginTop:"5px"},size:"xl",component:"a",href:"https://teleg.run/"+h},"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c"))))}}]),t}(r.a.Component);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var I=function(e){return{x:0,y:-10*e,scale:1,rot:20*Math.random()-10,delay:100*e}},L=function(e){return{rot:0,scale:1.5,y:-1e3}},G=function(e,t){return"perspective(1500px) rotateX(30deg) rotateY(".concat(e/10,"deg) rotateZ(").concat(e,"deg) scale(").concat(t,")")};var J=function(e){var t=Object(n.useState)((function(){return new Set})),a=Object(P.a)(t,1)[0],c=Object(D.c)(e.state.matches.length,(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(C.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},I(e),{from:L(e)})})),s=Object(P.a)(c,2),o=s[0],i=s[1],l=Object(B.a)((function(t){var n=Object(P.a)(t.args,1)[0],r=t.down,c=Object(P.a)(t.delta,1)[0],s=(t.distance,Object(P.a)(t.direction,1)[0]),o=t.velocity,l=s<0?-1:1;!r&&o>.2&&a.add(n),i((function(e){if(n===e){var t=a.has(n);return{x:t?(200+window.innerWidth)*l:r?c:0,rot:c/100+(t?10*l*o:0),scale:r?1.1:1,delay:void 0,config:{friction:50,tension:r?800:t?200:500}}}})),r||a.size!==e.state.matches.length||setTimeout((function(){return a.clear()||i((function(e){return I(e)}))}),600)}));return r.a.createElement("div",{className:"tinder"},r.a.createElement("center",null,r.a.createElement("h1",{style:{position:"absolute"}},"\u0412\u0430\u0448\u0438 \u043c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u043a\u0443\u0441\u044b \u0441\u043e\u0432\u043f\u0430\u043b\u0438!")),o.map((function(t,a){var n=t.x,c=t.y,s=t.rot,o=t.scale;return r.a.createElement(M,{key:a,i:a,x:n,y:c,rot:s,scale:o,trans:G,data:e.state.matches,bind:l})})))},R=a(57),U=a(58),W=a.n(U),X=a(121),Y=a.n(X),Z=Object(k.m)(),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={search:""},a.onChange=a.onChange.bind(Object(R.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.setState({search:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(k.i,{id:this.props.id},r.a.createElement(k.j,{left:r.a.createElement(k.f,{onClick:function(){e.props.choose()}},Z===k.g?r.a.createElement(Y.a,null):r.a.createElement(W.a,null))},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"),r.a.createElement(k.l,{value:this.state.search,onChange:this.onChange}),r.a.createElement(k.d,null,this.users.length>0&&this.users.map((function(t,a){return r.a.createElement(k.b,{style:{color:"white"},onChange:e.props.onChoose,id:a,checked:t.check,key:t.id},r.a.createElement("b",null,t.username))}))))}},{key:"users",get:function(){var e=this.state.search.toLowerCase();return this.props.state.users.filter((function(t){return t.username.toLowerCase().indexOf(e)>-1}))}}]),t}(r.a.Component),F=a(122),H=a.n(F),K=a(123),Q=a.n(K),V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChoose=function(e){var t=a.state.users;t[Number(e.currentTarget.id)].check=!t[Number(e.currentTarget.id)].check,a.setState({users:t})},a.go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.popout=function(e){a.setState({popout:e})},a.onStoryChange=function(e){a.setState({activeStory:e.currentTarget.dataset.story,activePanel:"home"})},a.choose=function(){a.setState({tracks:function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}(a.state.tracks)})},a.play=function(e){a.setState({tracks:a.state.tracks.map((function(t,n){return document.getElementById("audio").pause(),n===Number(e.currentTarget.id)?(t.play_now=!t.play_now,t.play_now?a.getMusic(t.track_name+" "+t.artist.map((function(e){return e.name})).join(", "),n):document.getElementById("audio").pause()):t.play_now=!1,t}))})},a.getMusic=function(e,t){fetch("https://deezerdevs-deezer.p.rapidapi.com/search?q="+e,{method:"GET",headers:{"x-rapidapi-host":"deezerdevs-deezer.p.rapidapi.com","x-rapidapi-key":"9608457de2msh39bd68eedabbaa1p1ab241jsn577c4aa2aac8"}}).then((function(e){return e.json()})).then((function(e){a.setState({now_stream:e.data[0].preview,index_song:t}),document.getElementById("audio").play()})).catch((function(e){console.log(e)}))},a.nextSong=function(){a.state.tracks.length-1<a.state.index_song+1?a.setState({tracks:a.state.tracks.map((function(e){return e.play_now=!1,e}))}):a.setState({tracks:a.state.tracks.map((function(e,t){return document.getElementById("audio").pause(),t===Number(a.state.index_song+1)?(e.play_now=!e.play_now,e.play_now?a.getMusic(e.track_name+" "+e.artist.map((function(e){return e.name})).join(", "),a.state.index_song+1):document.getElementById("audio").pause()):e.play_now=!1,e}))})},a.state={list:[],activeStory:"party",activePanel:"home",users:[],now_stream:"",link_index:0,links:["https://squanchymusic-parser.herokuapp.com/get_info?link=https://music.apple.com/ru/playlist/%D0%B4%D1%80%D0%B0%D0%BC-%D0%BD-%D0%B1%D1%8D%D0%B9%D1%81/pl.7a75d4e444fb4b3583ec9d48a2b0eef6","https://squanchymusic-parser.herokuapp.com/get_info?link=https://music.yandex.ru/users/aplinnikita/playlists/3"],popout:r.a.createElement(k.k,null),disabled_tinder:!0,disabled_party:!0},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(window.location.search),a=t.get("group_id"),n=t.get("user_id");a?fetch("https://squanchymusic-backend.herokuapp.com/squanchy/groups/generate_playlist/?group_id=".concat(a,"&platform=telegram"),{method:"GET",headers:{authorization:"Token b45ae4cecf894c51e45a624c5cad2e8349404c2b"}}).then((function(e){return e.json()})).then((function(t){return e.setState({tusa_data:t,disabled_party:!1,tracks:t.tracks,popout:null})})).catch((function(e){console.log(e)})):n&&fetch("https://squanchymusic-backend.herokuapp.com/squanchy/users/find_similar/?user_id=".concat(n),{method:"GET",headers:{authorization:"Token b45ae4cecf894c51e45a624c5cad2e8349404c2b"}}).then((function(e){return e.json()})).then((function(t){return e.setState({matches:t.filter((function(e){return e.username})).map((function(e){return{name:e.first_name+(e.last_name?" "+e.last_name:""),lang:e.language_code,pics:["https://mysterious-plateau-80675.herokuapp.com/telega_ava.php?img="+e.username],username:e.username}})),disabled_tinder:!1,activeStory:"tinder",popout:null})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(f.a,{activeStory:this.state.activeStory,tabbar:r.a.createElement(b.a,null,!this.state.disabled_party&&r.a.createElement(E.a,{onClick:this.onStoryChange,selected:"party"===this.state.activeStory,"data-story":"party",text:"\u041f\u0410\u0422\u0418\u0425\u0410\u0420\u0414"},r.a.createElement(Q.a,null)),!this.state.disabled_tinder&&r.a.createElement(E.a,{disableds:!0,onClick:this.onStoryChange,selected:"tinder"===this.state.activeStory,"data-story":"tinder",text:"\u0422\u0438\u043d\u0434\u0435\u0440"},r.a.createElement(H.a,null)))},r.a.createElement(m.a,{id:"tinder",activePanel:this.state.activePanel},r.a.createElement(J,{id:"home",go:this.go,state:this.state,play:this.play,nextSong:this.nextSong,choose:this.choose})),r.a.createElement(m.a,{id:"party",activePanel:this.state.activePanel,popout:this.state.popout},r.a.createElement(w,{id:"home",go:this.go,state:this.state,play:this.play,nextSong:this.nextSong,choose:this.choose}),r.a.createElement(A,{id:"find",go:this.go,state:this.state,choose:this.choose,onChoose:this.onChoose})))}}]),t}(n.Component);s.a.render(r.a.createElement(V,null),document.getElementById("root"))},99:function(e,t,a){}},[[186,1,2]]]);
//# sourceMappingURL=main.f9bb6a2e.chunk.js.map